{% extends 'visualization/dashboard.html' %}
{% load staticfiles %}
{% block title %}
<title>Página administración METBUS </title>
{% endblock title %}

{% block topimports %}
<!-- Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.css"/>
<!-- Marker Cluster Style -->
<link href="{% static 'components/leaflet.markercluster/dist/MarkerCluster.css' %}" rel="stylesheet">
<!-- Leaflet Scripts -->
<script src="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.js"></script>
<!-- jQuery -->
<script src="{% static 'components/gentelella/vendors/jquery/dist/jquery.min.js' %}"></script>
<!-- DataTables -->
<link rel="stylesheet" type="text/css"
      href="https://cdn.datatables.net/v/bs/jszip-2.5.0/pdfmake-0.1.18/dt-1.10.12/b-1.2.2/b-colvis-1.2.2/b-flash-1.2.2/b-html5-1.2.2/b-print-1.2.2/r-2.1.0/datatables.min.css"/>
{% endblock topimports %}

{% block toptiles %}
<div id="headers" class="row tile_count">
</div>
{% endblock toptiles %}

{% block maincontent %}
<div class="row">
    <div class="col-md-12 col-sm-12 col-xs-12">
        <div class="x_panel">
            <div class="x_title">
                <h2>Reportes diarios</h2>
                <ul class="nav navbar-right panel_toolbox">
                    <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                    </li>
                </ul>
                <div class="clearfix"></div>
            </div>
            <div class="x_content">
                <table id="example" class="table table-striped table-bordered dt-responsive nowrap"
                       cellspacing="0" width="100%"></table>
            </div>
        </div>
    </div>
</div>
{% endblock maincontent %}

{% block bottomimports %}
<!-- DataTables -->
<script type="text/javascript"
        src="https://cdn.datatables.net/v/bs/jszip-2.5.0/pdfmake-0.1.18/dt-1.10.12/b-1.2.2/b-colvis-1.2.2/b-flash-1.2.2/b-html5-1.2.2/b-print-1.2.2/r-2.1.0/datatables.min.js"></script>

<script>
    $(document).ready(function () {
        $('#example').dataTable({
            "pageLength": 100,
            dom: 'Bfrtip',
            buttons: [
                'copy', 'csv', 'excel', 'pdf', 'print'
            ],
            responsive: true,
            ajax: 'http://' + location.host + '/carriers/getDriversTable/',
            columns: [
                {title: "Reporte", data: 'type'},
                {title: "Fecha", data: 'timeStamp'},
                {title: "Patente", data: 'plate'},
                {title: "Servicio", data: 'service'},
                {title: "Lugar", data: 'place'},
                {title: "Paradero 1", data: 'busStop1'},
                {title: "Paradero 2", data: 'busStop2'}
            ],
            language: {
                "url": "//cdn.datatables.net/plug-ins/1.10.12/i18n/Spanish.json",
                buttons: {
                    copyTitle: 'Copiar al portapapeles',
                    copySuccess: {
                        _: 'Copiadas %d filas',
                        1: 'Copiada 1 fila'
                    }
                }
            }
        });
    });

    setInterval(function () {
        table.ajax.reload();
    }, 30000);


</script>
{% endblock bottomimports %}
